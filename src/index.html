<!DOCTYPE html>
<html lang="en" class="wmrards-html">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets/wmrards.min.css">
  <title>Ring & Ride Contact Form</title>
</head>

<body>
  <div id="root"></div>
  <div class="wmrards-feedback-loop">
    <input type="hidden" name="contentType" value="content" />
    <input type="hidden" name="contentName" value="PageTitle" />
    <input type="hidden" name="contentLastEditor" value="Editor name" />
    <input type="hidden" name="serviceName" value="Transport for West Midlands Design system" />
    <input type="hidden" name="contentLastUpdated" value="2021-03-19T11:18:15.532Z" />
    <div class="wmrards-container wmrards-feedback-loop__questions">
      <div class="wmrards-feedback-loop__useful">
        <span>Is this page useful?</span>
        <button class="wmrards-btn wmrards-btn--link wmrards-m-l-sm">Yes</button>
        <button class="wmrards-btn wmrards-btn--link wmrards-m-l-sm">No</button>
        <span class="wmrards-feedback-loop__sent-msg wmrards-m-b-none">Thank you for letting us know</span>
      </div>
      <div class="wmrards-feedback-loop__wrong">
        <button class="wmrards-btn wmrards-btn--link">Is there anything wrong with this page?</button>
      </div>
      <div class="wmrards-feedback-loop__sent-msg">
        <span>Thank you for letting us know. If you require urgent help, please contact our <a class="wmrards-link"
            href="#">Customer Service</a> team.</span>
      </div>
    </div>
    <form class="wmrards-container wmrards-feedback-loop__form wmrards-grid">
      <input type="hidden" name="contentWrong" value="true">
      <div class="wmrards-grid wmrards-grid--align-center wmrards-grid--justify-between wmrards-m-b-md">
        <legend class="wmrards-col-auto wmrards-m-none">
          <h2 class="wmrards-h3">Help us improve Transport for West Midlands</h2>
        </legend>
        <button class="wmrards-btn wmrards-btn--link wmrards-col-auto wmrards-m-l-md">Close</button>
      </div>
      <div class="wmrards-col-1 wmrards-col-md-1-2">
        <div class="wmrards-fe-group wmrards-m-b-md">
          <label class="wmrards-fe-label" for="fb-textarea-1">What is wrong with this page?</label>
          <textarea class="wmrards-fe-textarea" id="fb-textarea-1" name="contentWrongComment" rows="3"
            placeholder="Text" required="true"></textarea>
        </div>
      </div>
      <br>
      <div class="wmrards-col-1 wmrards-col-md-1-3">
        <div class="wmrards-fe-group wmrards-m-b-md">
          <label class="wmrards-fe-label" for="fb-input-2">Email address (optional)</label>
          <input class="wmrards-fe-input" id="fb-input-2" name="emailAddress" type="text" value="" placeholder="Text" />
        </div>
      </div>
      <br>
      <div class="wmrards-col-1">
        <div class="wmrards-fe-group wmrards-m-b-none">
          <div class="wmrards-fe-checkboxes">
            <span class="wmrards-fe-checkboxes__desc">
            </span>
            <label class="wmrards-fe-checkboxes__container">
              <div class="wmrards-m-b-lg">I consent to being contacted about the issue I am reporting (optional)
              </div>
              <input id="fb-checkbox-consent-3" class="wmrards-fe-checkboxes__input" value="" name="consent_null"
                type="checkbox" />
              <span class="wmrards-fe-checkboxes__checkmark">
                <svg class="wmrards-fe-checkboxes__icon">
                  <use xlink:href="#wmrards-general-checkmark" href="#wmrards-general-checkmark"></use>
                </svg>
              </span>
            </label>
          </div>
        </div>
      </div>
      <br>
      <div class="wmrards-col-1">
        <div class="wmrards-fe-group wmrards-m-b-none">
          <div class="wmrards-fe-checkboxes">
            <span class="wmrards-fe-checkboxes__desc">
            </span>
            <label class="wmrards-fe-checkboxes__container">
              <div class="wmrards-m-b-lg">I agree to <a href="#">WMCAâ€™s Privacy Policy</a>
              </div>
              <input id="fb-checkbox-consent-4" class="wmrards-fe-checkboxes__input" value="" name="privacy_null"
                type="checkbox" required="true" />
              <span class="wmrards-fe-checkboxes__checkmark">
                <svg class="wmrards-fe-checkboxes__icon">
                  <use xlink:href="#wmrards-general-checkmark" href="#wmrards-general-checkmark"></use>
                </svg>
              </span>
            </label>
          </div>
        </div>
      </div>
      <br>
      <button class="wmrards-btn wmrards-btn--primary wmrards-m-t-md" type="submit">
        Submit
      </button>
    </form>
  </div>
  <footer>
    <div class="wmrards-footer wmrards-footer--v2">
      <div class="wmrards-container wmrards-grid">
        <div class="wmrards-col-1 wmrards-col-lg-1-3 wmrards-footer__updates-col">
          <h3 class="wmrards-footer__heading">Stay up to date</h3>
          <p>Don't miss out on vital information, subscribe today and be in the know at all times.</p>
          <a href="#" class="wmrards-btn wmrards-footer__btn wmrards-footer__btn--block">Sign up to updates</a>
        </div>
        <div class="wmrards-col-1 wmrards-col-lg-1-3">
          <h3 class="wmrards-footer__heading wmrards-collapse-heading" aria-controls="footer-menu-"
            aria-expanded="true">
            Resources &amp; support
            <svg class="wmrards-collapse-heading__indicator">
              <use xlink:href="#wmrards-general-chevron-right" href="#wmrards-general-chevron-right"></use>
            </svg>
          </h3>
          <ul class="wmrards-footer__menu wmrards-collapse-panel" id="footer-menu-">
            <li><a class="wmrards-footer__link" href="#">Businesses</a></li>
            <li><a class="wmrards-footer__link" href="#">Education</a></li>
            <li><a class="wmrards-footer__link" href="#">Job centres</a></li>
            <li><a class="wmrards-footer__link" href="#">Young people</a></li>
          </ul>
        </div>
        <div class="wmrards-col-1 wmrards-col-lg-1-3">
          <h3 class="wmrards-footer__heading wmrards-collapse-heading" aria-controls="footer-menu-about-us"
            aria-expanded="true">
            About us
            <svg class="wmrards-collapse-heading__indicator">
              <use xlink:href="#wmrards-general-chevron-right" href="#wmrards-general-chevron-right"></use>
            </svg>
          </h3>
          <ul class="wmrards-footer__menu wmrards-collapse-panel" id="footer-menu-about-us">
            <li><a class="wmrards-footer__link" href="#">About Transport for West Midlands</a></li>
            <li><a class="wmrards-footer__link" href="#">WMN Apps</a></li>
          </ul>
          <h3 class="wmrards-footer__heading">Social media</h3>
          <ul class="wmrards-footer__social-media">
            <li><a href="https://www.facebook.com/westmidlandsnetwork/" title="Facebook"><svg>
                  <use xlink:href="#wmrards-social-facebook" href="#wmrards-social-facebook"></use>
                </svg></a></li>
            <li><a href="https://twitter.com/WMNetwork" title="Twitter"><svg>
                  <use xlink:href="#wmrards-social-twitter" href="#wmrards-social-twitter"></use>
                </svg></a></li>
            <li><a href="https://www.instagram.com/wmnetwork/" title="Instagram"><svg>
                  <use xlink:href="#wmrards-social-instagram" href="#wmrards-social-instagram"></use>
                </svg></a></li>
          </ul>
        </div>
      </div>
      <div class="wmrards-container">
        <div class="wmrards-footer__bottom wmrards-grid">
          <div class="wmrards-col-1 wmrards-col-md-1-2">
            <p class="wmrards-footer__copyright">&copy; West Midlands Combined Authority 2021</p>
          </div>
          <div class="wmrards-col-1 wmrards-col-md-1-2">
            <ul class="wmrards-footer__bottom-menu">
              <li><a class="wmrards-footer__link" href="">Accessibility</a></li>
              <li><a class="wmrards-footer__link" href="">Terms and Conditions</a></li>
              <li><a class="wmrards-footer__link" href="">Policies</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script src="App.js" type="module"></script>
  <script>
    const ajax = new XMLHttpRequest();
    ajax.open('GET', 'https://cloudcdn.wmca.org.uk/staging/rarassets/1.0.3/img/wmrards-icons.min.svg', true);
    ajax.send();
    ajax.onload = function () {
      const div = document.createElement('div');
      div.style.display = 'none';
      div.innerHTML = ajax.responseText;
      document.body.insertBefore(div, document.body.childNodes[0]);
    };
  </script>
  <script>
    "use strict";
    var exports = {};
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports["default"] = void 0;

    var footerJs = function footerJs() {
      var collapseMenus = document.querySelectorAll('.wmrards-collapse-heading');
      var eventListenersAdded = false;

      var handleMobileFooter = function handleMobileFooter() {
        var windowWidth = window.innerWidth;

        if (windowWidth < 768 && !eventListenersAdded) {
          eventListenersAdded = true; // Stop multiple event listeners being added as collapse functionality forces 'resize' call on window.

          collapseMenus.forEach(function (collapseToggle) {
            var toggleActive = false;
            var panel = document.getElementById(collapseToggle.getAttribute('aria-controls'));

            var handleToggle = function handleToggle() {
              if (toggleActive) {
                collapseToggle.setAttribute('aria-expanded', 'true');
                panel.style.maxHeight = "".concat(panel.scrollHeight, "px");
              } else {
                collapseToggle.setAttribute('aria-expanded', 'false');
                panel.style.maxHeight = null;
              }
            };

            handleToggle();
            collapseToggle.addEventListener('click', function () {
              toggleActive = !toggleActive;
              handleToggle();
            });
          });
        }
      }; // init mobile nav function


      handleMobileFooter();
      window.addEventListener('resize', handleMobileFooter);
    };

    var _default = footerJs;
    exports["default"] = _default;
    footerJs();
  </script>
  <script>
    "use strict";

    Object.defineProperty(exports, "__esModule", {
      value: true
    });
    exports["default"] = void 0;

    var feedbackLoopJS = function feedbackLoopJS() {
      // CONSTANTS
      var feedbackLoopClass = 'wmrards-feedback-loop';
      var isOpenClass = 'wmrards-is--open';
      var isSentClass = 'wmrards-is--sent';
      var formGroupClass = 'wmrards-fe-group';
      var formInputClass = 'wmrards-fe-input';
      var formCheckBoxesClass = 'wmrards-fe-checkboxes';
      var formTextareaClass = 'wmrards-fe-textarea';
      var formGroupErrorClass = "".concat(formGroupClass, "--error");
      var inputErrorClass = "".concat(formInputClass, "--error");
      var errorMessageClass = 'wmrards-fe-error-message'; // Helper functions

      var nodeListToArray = function nodeListToArray(nodeList) {
        return Array.prototype.slice.call(nodeList);
      };

      var createErrorMessage = function createErrorMessage(textContent) {
        var element = document.createElement('span');
        element.classList.add(errorMessageClass);
        element.textContent = textContent;
        return element;
      }; // Form submission functions


      var sendFeedback = function sendFeedback(data) {
        // Send data
        var url = 'https://prod-10.uksouth.logic.azure.com/workflows/8bf9c75f399246de96cf505a1331e738/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=qSXrjDmMgHoPORSob4-uqonyJyF8mB8addKURnOhL1E';
        fetch(url, {
          method: 'POST',
          headers: {
            'content-type': 'application/json'
          },
          body: JSON.stringify(data)
        }).then(function (response) {
          return response.text();
        }).then(function (text) {
          // eslint-disable-next-line no-console
          console.log(text);
        });
      };

      var parseFormData = function parseFormData(nodeList) {
        var formData = {}; // Add data from DOM

        formData.contentPath = document.location.pathname; // Add data from form fields

        var formFields = nodeListToArray(nodeList);
        formFields.forEach(function (field) {
          if (!field.value) return;
          if (field.type === 'checkbox') return;
          if (field.type === 'radio' && !field.checked) return;
          formData[field.name] = field.value;
        });
        return formData;
      };

      var sendPageUsefulFeedback = function sendPageUsefulFeedback(inputElements, isPageUseful) {
        var formData = parseFormData(inputElements);
        formData.contentHelpful = isPageUseful;
        sendFeedback(formData);
      };

      var sendSomethingWrongFeedback = function sendSomethingWrongFeedback(inputElements) {
        var formData = parseFormData(inputElements);
        sendFeedback(formData);
      }; // Form validation functions


      var getFormGroupToValidate = function getFormGroupToValidate(form) {
        var formGroups = nodeListToArray(form.querySelectorAll(".".concat(formGroupClass)));

        var filterFunc = function filterFunc(group) {
          return group.querySelectorAll('[required="true"]').length;
        };

        var formGroupsToValidate = formGroups.filter(filterFunc);
        return formGroupsToValidate;
      };

      var showErrorState = function showErrorState(formGroup, type) {
        if (formGroup.classList.contains(formGroupErrorClass)) return;
        formGroup.classList.add(formGroupErrorClass);

        switch (type) {
          case 'checkbox': {
            var container = formGroup.querySelector(".".concat(formCheckBoxesClass));
            var errorMsg = createErrorMessage('This field is required');
            container.prepend(errorMsg);
            break;
          }

          case 'textarea': {
            var textareaElement = formGroup.querySelector(".".concat(formTextareaClass));
            var parentElement = textareaElement.parentElement;

            var _errorMsg = createErrorMessage('This field is required');

            textareaElement.classList.add(inputErrorClass);
            parentElement.insertBefore(_errorMsg, textareaElement);
            break;
          }

          case 'text': {
            var inputElement = formGroup.querySelector(".".concat(formInputClass));
            var _parentElement = inputElement.parentElement;

            var _errorMsg2 = createErrorMessage('This field is required');

            inputElement.classList.add(inputErrorClass);

            _parentElement.insertBefore(_errorMsg2, inputElement);

            break;
          }

          default:
            break;
        }
      };

      var clearErrorState = function clearErrorState(formGroup) {
        formGroup.classList.remove(formGroupErrorClass); // Remove error messages

        var errorMsg = formGroup.querySelector(".".concat(errorMessageClass));
        if (errorMsg) errorMsg.remove(); // Remove error classes

        var erroredInputs = formGroup.querySelectorAll(".".concat(inputErrorClass));
        erroredInputs.forEach(function (input) {
          return input.classList.remove(inputErrorClass);
        });
      };

      var addValidationEvents = function addValidationEvents(form) {
        var formGroups = getFormGroupToValidate(form); // Loop through and add invalid validation

        formGroups.forEach(function (group) {
          var formElements = group.querySelectorAll('[required="true"]');
          formElements.forEach(function (element) {
            element.addEventListener('input', function () {
              return clearErrorState(group);
            });
            element.addEventListener('invalid', function (event) {
              event.preventDefault();
              showErrorState(group, element.type);
            });
          });
        });
      }; // Set up all the feedback loops


      var feedbackLoops = document.querySelectorAll(".".concat(feedbackLoopClass));
      feedbackLoops.forEach(function (feedbackLoop) {
        var somethingWrongBtn = feedbackLoop.querySelector(".".concat(feedbackLoopClass, "__wrong > button"));
        var closeBtn = feedbackLoop.querySelector(".".concat(feedbackLoopClass, "__form legend + button"));
        var questionsRef = feedbackLoop.querySelector(".".concat(feedbackLoopClass, "__questions"));
        var contentWrongFormRef = feedbackLoop.querySelector(".".concat(feedbackLoopClass, "__form"));
        var pageUsefulRef = feedbackLoop.querySelector(".".concat(feedbackLoopClass, "__useful"));
        var pageUsefulBtns = nodeListToArray(pageUsefulRef.querySelectorAll('button')); // Form functions

        var clearFormErrors = function clearFormErrors() {
          var formGroups = nodeListToArray(contentWrongFormRef.querySelectorAll(".".concat(formGroupClass)));
          formGroups.forEach(function (group) {
            return clearErrorState(group);
          });
        };

        var toggleFeedbackForm = function toggleFeedbackForm() {
          var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
          if (event) event.preventDefault();
          feedbackLoop.classList.toggle(isOpenClass);
          clearFormErrors();
        };

        var submitIsPageUseful = function submitIsPageUseful(event) {
          var inputElements = feedbackLoop.querySelectorAll('[type="hidden"]');
          sendPageUsefulFeedback(inputElements, event.target.textContent);
          pageUsefulRef.classList.add(isSentClass);
        };

        var submitContentWrongForm = function submitContentWrongForm(event) {
          event.preventDefault();
          var inputElements = feedbackLoop.querySelectorAll('textarea, input');
          sendSomethingWrongFeedback(inputElements);
          questionsRef.classList.add(isSentClass);
          toggleFeedbackForm();
        }; // Attach form event listeners


        somethingWrongBtn.addEventListener('click', toggleFeedbackForm);
        closeBtn.addEventListener('click', toggleFeedbackForm);
        addValidationEvents(contentWrongFormRef);
        pageUsefulBtns.forEach(function (btn) {
          return btn.addEventListener('click', submitIsPageUseful);
        });
        contentWrongFormRef.addEventListener('submit', submitContentWrongForm);
      });
    };

    var _default = feedbackLoopJS;
    exports["default"] = _default;
    feedbackLoopJS();
  </script>
</body>

</html>